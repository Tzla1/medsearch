<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Crear cuenta - Med Search Platform">
    <meta name="keywords" content="registro, crear cuenta, médicos, pacientes">
    <title>Crear Cuenta - Med Search Platform</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body class="auth-body">
    <!-- Header Navigation -->
    <header class="header-minimal">
        <div class="container-xl">
            <nav class="navbar-minimal">
                <!-- Logo -->
                <div class="navbar-brand">
                    <a href="index.html" class="logo-link">
                        <img src="assets/logo.svg" alt="Med Search" class="logo" width="140" height="32">
                        <span class="logo-text">Med Search</span>
                    </a>
                </div>
                
                <!-- Back Link -->
                <a href="index.html" class="back-link">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <polyline points="15,18 9,12 15,6"></polyline>
                    </svg>
                    Volver al inicio
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="auth-main">
        <div class="auth-container register-container">
            <!-- Auth Card -->
            <div class="auth-card register-card">
                <div class="auth-header">
                    <div class="auth-logo">
                        <img src="assets/logo.svg" alt="Med Search" class="auth-logo-img">
                    </div>
                    <h1 class="auth-title">Crear Cuenta</h1>
                    <p class="auth-subtitle">Únete a nuestra comunidad médica</p>
                </div>
                
                <!-- User Type Selection -->
                <div class="user-type-selection" id="user-type-selection">
                    <h3 class="selection-title">¿Cómo quieres usar Med Search?</h3>
                    <div class="user-type-cards">
                        <div class="user-type-card" data-type="patient">
                            <div class="type-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                            </div>
                            <h4 class="type-title">Soy Paciente</h4>
                            <p class="type-description">Busco médicos especialistas y quiero agendar citas</p>
                            <div class="type-features">
                                <span class="feature-tag">Buscar médicos</span>
                                <span class="feature-tag">Agendar citas</span>
                                <span class="feature-tag">Gestionar historial</span>
                            </div>
                        </div>
                        
                        <div class="user-type-card" data-type="doctor">
                            <div class="type-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 2l.09 2.09L14 4.18l-.09 1.91L12 8l-1.91-.09L10 6l.09-1.91L12 2z"></path>
                                    <path d="M8 8l2.09.09L10.18 10l1.91-.09L14 8l-.09 1.91L12 10.18l-1.91-.09L8 8z"></path>
                                    <path d="M2 12l2.09.09L4.18 14l1.91-.09L8 12l-.09 1.91L6 14.18l-1.91-.09L2 12z"></path>
                                </svg>
                            </div>
                            <h4 class="type-title">Soy Médico</h4>
                            <p class="type-description">Quiero ofrecer mis servicios profesionales</p>
                            <div class="type-features">
                                <span class="feature-tag">Perfil profesional</span>
                                <span class="feature-tag">Gestionar agenda</span>
                                <span class="feature-tag">Atender pacientes</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Registration Form -->
                <form class="auth-form register-form" id="register-form" style="display: none;" novalidate>
                    <!-- Hidden field for user type -->
                    <input type="hidden" id="user-type" name="userType" value="">
                    
                    <!-- Form Progress -->
                    <div class="form-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <span class="progress-text" id="progress-text">Paso 1 de 3</span>
                    </div>
                    
                    <!-- Step 1: Basic Information -->
                    <div class="form-step active" id="step-1">
                        <h3 class="step-title">Información Personal</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="first-name" class="form-label required">Nombre</label>
                                <input 
                                    type="text" 
                                    id="first-name"
                                    name="firstName"
                                    class="form-input"
                                    placeholder="Nombre"
                                    autocomplete="given-name"
                                    required>
                                <div class="form-error" id="first-name-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="last-name" class="form-label required">Apellido</label>
                                <input 
                                    type="text" 
                                    id="last-name"
                                    name="lastName"
                                    class="form-input"
                                    placeholder="Apellido"
                                    autocomplete="family-name"
                                    required>
                                <div class="form-error" id="last-name-error"></div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email" class="form-label required">Correo electrónico</label>
                            <div class="input-wrapper">
                                <input 
                                    type="email" 
                                    id="email"
                                    name="email"
                                    class="form-input"
                                    placeholder="tu@email.com"
                                    autocomplete="email"
                                    required>
                                <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                    <polyline points="22,6 12,13 2,6"></polyline>
                                </svg>
                            </div>
                            <div class="form-error" id="email-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone" class="form-label">Teléfono</label>
                            <div class="input-wrapper">
                                <input 
                                    type="tel" 
                                    id="phone"
                                    name="phone"
                                    class="form-input"
                                    placeholder="+52 55 1234 5678"
                                    autocomplete="tel">
                                <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                                </svg>
                            </div>
                            <div class="form-error" id="phone-error"></div>
                        </div>
                    </div>
                    
                    <!-- Step 2: Security -->
                    <div class="form-step" id="step-2">
                        <h3 class="step-title">Seguridad de la Cuenta</h3>
                        
                        <div class="form-group">
                            <label for="password" class="form-label required">Contraseña</label>
                            <div class="input-wrapper">
                                <input 
                                    type="password" 
                                    id="password"
                                    name="password"
                                    class="form-input"
                                    placeholder="••••••••"
                                    autocomplete="new-password"
                                    required>
                                <button type="button" class="password-toggle" id="password-toggle" aria-label="Mostrar contraseña">
                                    <svg class="eye-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                    <svg class="eye-off-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="display: none;">
                                        <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
                                        <line x1="1" y1="1" x2="23" y2="23"></line>
                                    </svg>
                                </button>
                            </div>
                            <div class="form-error" id="password-error"></div>
                            
                            <!-- Password Strength Indicator -->
                            <div class="password-strength" id="password-strength">
                                <div class="strength-bar">
                                    <div class="strength-fill"></div>
                                </div>
                                <span class="strength-text">Fortaleza de la contraseña</span>
                            </div>
                            
                            <!-- Password Requirements -->
                            <div class="password-requirements">
                                <div class="requirement" id="req-length">
                                    <svg class="req-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="16,12 12,8 8,12"></polyline>
                                    </svg>
                                    Al menos 8 caracteres
                                </div>
                                <div class="requirement" id="req-uppercase">
                                    <svg class="req-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="16,12 12,8 8,12"></polyline>
                                    </svg>
                                    Una letra mayúscula
                                </div>
                                <div class="requirement" id="req-number">
                                    <svg class="req-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <polyline points="16,12 12,8 8,12"></polyline>
                                    </svg>
                                    Un número
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm-password" class="form-label required">Confirmar contraseña</label>
                            <div class="input-wrapper">
                                <input 
                                    type="password" 
                                    id="confirm-password"
                                    name="confirmPassword"
                                    class="form-input"
                                    placeholder="••••••••"
                                    autocomplete="new-password"
                                    required>
                                <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                    <circle cx="12" cy="16" r="1"></circle>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                </svg>
                            </div>
                            <div class="form-error" id="confirm-password-error"></div>
                        </div>
                    </div>
                    
                    <!-- Step 3: Professional Info (for doctors) -->
                    <div class="form-step doctor-only" id="step-3" style="display: none;">
                        <h3 class="step-title">Información Profesional</h3>
                        
                        <div class="form-group">
                            <label for="specialty" class="form-label required">Especialidad</label>
                            <select 
                                id="specialty"
                                name="specialtyId"
                                class="form-input"
                                required>
                                <option value="">Selecciona tu especialidad</option>
                                <!-- Generated by JavaScript -->
                            </select>
                            <div class="form-error" id="specialty-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="license-number" class="form-label required">Cédula Profesional</label>
                            <input 
                                type="text" 
                                id="license-number"
                                name="licenseNumber"
                                class="form-input"
                                placeholder="Número de cédula profesional"
                                required>
                            <div class="form-error" id="license-number-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="experience" class="form-label">Años de experiencia</label>
                            <select 
                                id="experience"
                                name="experienceYears"
                                class="form-input">
                                <option value="">Seleccionar</option>
                                <option value="1">1 año</option>
                                <option value="2">2 años</option>
                                <option value="3">3 años</option>
                                <option value="4">4 años</option>
                                <option value="5">5 años</option>
                                <option value="6-10">6-10 años</option>
                                <option value="11-15">11-15 años</option>
                                <option value="16-20">16-20 años</option>
                                <option value="20+">Más de 20 años</option>
                            </select>
                            <div class="form-error" id="experience-error"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="bio" class="form-label">Biografía profesional</label>
                            <textarea 
                                id="bio"
                                name="bio"
                                class="form-input"
                                rows="4"
                                placeholder="Describe tu experiencia profesional, especialidades y enfoque médico..."
                                maxlength="500"></textarea>
                            <div class="char-counter">
                                <span id="bio-char-count">0</span>/500 caracteres
                            </div>
                            <div class="form-error" id="bio-error"></div>
                        </div>
                    </div>
                    
                    <!-- Step 3: Terms (for patients) / Step 4: Terms (for doctors) -->
                    <div class="form-step" id="step-terms">
                        <h3 class="step-title">Términos y Condiciones</h3>
                        
                        <div class="terms-content">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="terms" name="terms" required>
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">
                                        Acepto los <a href="#" class="terms-link">Términos de Servicio</a> 
                                        y la <a href="#" class="terms-link">Política de Privacidad</a>
                                    </span>
                                </label>
                                <div class="form-error" id="terms-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="newsletter" name="newsletter">
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">
                                        Quiero recibir noticias y actualizaciones por email
                                    </span>
                                </label>
                            </div>
                            
                            <div class="form-group doctor-only" style="display: none;">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="medical-terms" name="medicalTerms" required>
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">
                                        Certifico que soy un profesional médico licenciado y 
                                        acepto los <a href="#" class="terms-link">Términos Médicos Profesionales</a>
                                    </span>
                                </label>
                                <div class="form-error" id="medical-terms-error"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Form Navigation -->
                    <div class="form-navigation">
                        <button type="button" class="btn btn-outline" id="prev-step" style="display: none;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="15,18 9,12 15,6"></polyline>
                            </svg>
                            Anterior
                        </button>
                        
                        <button type="button" class="btn btn-primary" id="next-step">
                            Siguiente
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="9,18 15,12 9,6"></polyline>
                            </svg>
                        </button>
                        
                        <button type="submit" class="btn btn-primary" id="submit-btn" style="display: none;">
                            <span class="btn-text">Crear Cuenta</span>
                            <div class="btn-loading" style="display: none;">
                                <svg class="spinner" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <path d="m12 6 0 6 4 2"></path>
                                </svg>
                            </div>
                        </button>
                    </div>
                    
                    <!-- Form Error -->
                    <div class="form-error-global" id="form-error" style="display: none;"></div>
                </form>
                
                <!-- Sign In Link -->
                <div class="auth-footer">
                    <span>¿Ya tienes cuenta? </span>
                    <a href="login.html" class="auth-link">Inicia sesión aquí</a>
                </div>
            </div>
            
            <!-- Auth Illustration -->
            <div class="auth-illustration register-illustration">
                <div class="illustration-container">
                    <div class="illustration-image">
                        <!-- Registration illustration SVG -->
                        <svg width="400" height="350" viewBox="0 0 400 350" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:0.8" />
                                    <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:0.6" />
                                </linearGradient>
                            </defs>
                            
                            <!-- Background elements -->
                            <circle cx="80" cy="60" r="40" fill="url(#grad1)" opacity="0.1"/>
                            <circle cx="340" cy="280" r="35" fill="url(#grad1)" opacity="0.15"/>
                            <circle cx="60" cy="280" r="25" fill="url(#grad1)" opacity="0.2"/>
                            
                            <!-- Multiple doctors -->
                            <g transform="translate(100, 80)">
                                <!-- Doctor 1 -->
                                <g>
                                    <rect x="20" y="100" width="35" height="70" rx="17" fill="#3B82F6" opacity="0.8"/>
                                    <circle cx="37.5" cy="75" r="20" fill="#FED7AA"/>
                                    <path d="M25 85 Q20 95 20 105 Q20 115 30 115 Q40 115 40 105 Q40 95 45 85" 
                                          stroke="#374151" stroke-width="2" fill="none"/>
                                    <circle cx="20" cy="105" r="6" fill="#374151"/>
                                </g>
                                
                                <!-- Doctor 2 -->
                                <g transform="translate(80, 0)">
                                    <rect x="20" y="100" width="35" height="70" rx="17" fill="#10B981" opacity="0.8"/>
                                    <circle cx="37.5" cy="75" r="20" fill="#FED7AA"/>
                                    <path d="M25 85 Q20 95 20 105 Q20 115 30 115 Q40 115 40 105 Q40 95 45 85" 
                                          stroke="#374151" stroke-width="2" fill="none"/>
                                    <circle cx="20" cy="105" r="6" fill="#374151"/>
                                </g>
                                
                                <!-- Doctor 3 -->
                                <g transform="translate(160, 0)">
                                    <rect x="20" y="100" width="35" height="70" rx="17" fill="#F59E0B" opacity="0.8"/>
                                    <circle cx="37.5" cy="75" r="20" fill="#FED7AA"/>
                                    <path d="M25 85 Q20 95 20 105 Q20 115 30 115 Q40 115 40 105 Q40 95 45 85" 
                                          stroke="#374151" stroke-width="2" fill="none"/>
                                    <circle cx="20" cy="105" r="6" fill="#374151"/>
                                </g>
                            </g>
                            
                            <!-- Connection lines -->
                            <g stroke="#3B82F6" stroke-width="2" opacity="0.3">
                                <line x1="150" y1="200" x2="200" y2="220"/>
                                <line x1="200" y1="220" x2="250" y2="200"/>
                                <line x1="180" y1="180" x2="220" y2="180"/>
                            </g>
                            
                            <!-- Medical icons -->
                            <g opacity="0.6">
                                <!-- Hearts -->
                                <path d="M50 200 C50 190, 70 190, 70 200 C70 190, 90 190, 90 200 C90 220, 70 230, 70 230 C70 230, 50 220, 50 200 Z" 
                                      fill="#EF4444"/>
                                
                                <!-- Plus signs -->
                                <g stroke="#10B981" stroke-width="3">
                                    <line x1="320" y1="80" x2="320" y2="100"/>
                                    <line x1="310" y1="90" x2="330" y2="90"/>
                                </g>
                                
                                <g stroke="#F59E0B" stroke-width="2">
                                    <line x1="350" y1="150" x2="350" y2="165"/>
                                    <line x1="342.5" y1="157.5" x2="357.5" y2="157.5"/>
                                </g>
                            </g>
                        </svg>
                    </div>
                    
                    <div class="illustration-content">
                        <h2>Únete a nuestra comunidad médica</h2>
                        <p>Forma parte de una plataforma que conecta a los mejores profesionales de la salud con pacientes que necesitan atención de calidad.</p>
                        
                        <div class="illustration-stats">
                            <div class="stat-item">
                                <span class="stat-number">500+</span>
                                <span class="stat-label">Médicos registrados</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">1000+</span>
                                <span class="stat-label">Pacientes activos</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number">15</span>
                                <span class="stat-label">Especialidades</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <div class="modal" id="success-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div class="success-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 12l2 2 4-4"></path>
                        <circle cx="12" cy="12" r="10"></circle>
                    </svg>
                </div>
                <h3 class="modal-title">¡Cuenta creada exitosamente!</h3>
            </div>
            <div class="modal-body">
                <p class="success-message" id="success-message">
                    Tu cuenta ha sido creada correctamente. Ahora puedes iniciar sesión y comenzar a usar Med Search Platform.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="go-to-login">Iniciar Sesión</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p class="loading-text">Creando tu cuenta...</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="scripts/utils.js"></script>
    <script src="scripts/api.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/register.js"></script>
</body>
</html>